# Middlewares

Les Middlewares en NestJS sont des fonctions qui s'ex√©cutent avant ou apr√®s le traitement d'une requ√™te. Ils sont
utilis√©s pour diverses t√¢ches telles que l'authentification, la journalisation, la gestion des erreurs, etc.

## Cr√©ation d'un Middleware de Logging

Pour cr√©er un middleware de logging, vous pouvez suivre ces √©tapes :

1. Cr√©ez un dossier `middlewares` dans le r√©pertoire `src`.
2. Cr√©ez un fichier `logging.middleware.ts` dans le dossier `middlewares`.
    ```bash
    nest g middleware middlewares/logging
    ```
4. Enregistrez le middleware dans le module appropri√©. (automatique si vous utilisez la CLI de NestJS)
5. Utilisez le middleware dans votre application.

### Exemple de Middleware de Logging

```typescript
import { Injectable, NestMiddleware } from '@nestjs/common';
import { NextFunction, Request, Response } from 'express';

@Injectable()
export class LoggingMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction) {
    console.log(`Request...`);
    console.log(`Method: ${req.method}`);
    console.log(`URL: ${req.url}`);
    next();
  }
}
```

### Enregistrement du Middleware

Pour enregistrer le middleware, vous pouvez le faire dans le module principal de votre application (`app.module.ts`) ou
dans un module sp√©cifique.

```typescript
// (...)
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer.apply(LoggingMiddleware).forRoutes('*'); // '*' pour tous les routes, ou ['route1', 'route2']
  }
}
```

*üîé sans oubli√© l'import du module*