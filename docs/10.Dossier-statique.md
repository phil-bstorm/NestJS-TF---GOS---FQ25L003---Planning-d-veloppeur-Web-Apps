# Dossier statique

Le dossier statique dans une application NestJS est utilisé pour servir des fichiers statiques tels que des images, des
fichiers CSS, des fichiers JavaScript, etc. Cela permet aux clients d'accéder directement à ces ressources sans passer
par un contrôleur.

## Dépendances

Pour servir des fichiers statiques, vous devez installer le package `@nestjs/serve-static` :

```bash
npm install @nestjs/serve-static
```

Créer un dossier `public` à la racine de votre projet, où vous placerez vos fichiers statiques. Par exemple, vous
pouvez y mettre des images, des fichiers CSS, etc.

## Configuration

Dans votre module principal (généralement `app.module.ts`), vous devez importer le module `ServeStaticModule` et
configurer le chemin vers le dossier statique. Voici un exemple de configuration :

```typescript
import { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';
// (... autres imports)
import { ServeStaticModule } from '@nestjs/serve-static'; // NEW
import { join } from 'path'; // NEW

@Module({
  imports: [
    // (... autres imports)
    
    // fichier statique
    ServeStaticModule.forRoot({ // NEW
      rootPath: join(__dirname, '..', 'public'),
    }),
  ],
  controllers: [TodoController, AuthController],
  providers: [TodoService, AuthService],
})
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer.apply(LoggingMiddleware).forRoutes('*'); // '*' pour tous les routes, ou ['route1', 'route2']
    consumer.apply(AuthMiddleware).forRoutes('*');
  }
}
```

explication:
- `ServeStaticModule.forRoot()` : Cette méthode configure le module pour servir des fichiers statiques.
- `rootPath` : C'est le chemin vers le dossier où se trouvent vos fichiers statiques. Dans cet exemple, nous utilisons
  `join(__dirname, '..', 'public')` pour construire le chemin absolu vers le dossier `public`.
- `__dirname` : C'est une variable Node.js qui représente le répertoire actuel du fichier en cours d'exécution.
- `join` : C'est une fonction de Node.js qui permet de construire des chemins de fichiers de manière sécurisée et
  compatible avec différents systèmes d'exploitation.

## Accès aux fichiers statiques
Une fois que vous avez configuré le module `ServeStaticModule`, vous pouvez accéder à vos fichiers statiques via l'URL

correspondante. Par exemple, si vous avez un fichier `image.png` dans le dossier `public`, vous pouvez y accéder
via l'URL suivante :

```
http://localhost:3000/image.png
```